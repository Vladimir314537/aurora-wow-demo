<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURORA 4.0 - Система мышления с умным поиском</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --primary-light: #60a5fa;
            --accent: #10b981;
            --ai-color: #8b5cf6;
            --neon-blue: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-pink: #ff00ff;
            --neon-green: #00ff9d;
            --neon-yellow: #ffed4e;
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --border: #475569;
            --shadow: rgba(0, 0, 0, 0.3);
            --card-bg: rgba(30, 41, 59, 0.9);
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ===== ОПТИМИЗИРОВАННАЯ ГЕРОЙ-СЕКЦИЯ С АНИМАЦИЕЙ ===== */
        .hero-section {
            width: 100%;
            min-height: 100vh;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, 
                rgba(15, 23, 42, 0.95) 0%, 
                rgba(30, 41, 59, 0.95) 100%);
            background-size: cover;
            background-position: center;
        }

        .hero-container {
            max-width: 1400px;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            z-index: 10;
            position: relative;
        }

        .hero-content {
            padding: 40px;
            animation: fadeInUp 0.8s ease-out;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2));
            border: 1px solid rgba(139, 92, 246, 0.3);
            padding: 12px 24px;
            border-radius: 50px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .hero-badge i {
            color: var(--ai-color);
            font-size: 20px;
            animation: pulse 2s infinite;
        }

        .hero-badge span {
            font-weight: 700;
            font-size: 14px;
            color: var(--text-primary);
            letter-spacing: 1px;
        }

        .hero-title {
            font-size: 3.5em;
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 25px;
            background: linear-gradient(135deg, var(--primary), var(--ai-color), var(--neon-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 200%;
            animation: gradientText 3s ease infinite;
        }

        .hero-subtitle {
            font-size: 1.2em;
            color: var(--text-secondary);
            margin-bottom: 40px;
            line-height: 1.6;
            max-width: 500px;
        }

        .hero-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* УПРОЩЕННАЯ РАМКА БЕЗ ПЕРЕЛИВАНИЙ */
        .hero-image-container {
            position: relative;
            perspective: 1000px;
            animation: float 6s ease-in-out infinite;
        }

        .image-frame {
            position: relative;
            border-radius: 25px;
            overflow: hidden;
            transform-style: preserve-3d;
            transform: rotateY(-5deg) rotateX(2deg);
            transition: transform 0.5s ease;
            background: transparent;
            width: 100%;
            height: 500px;
            border: 2px solid rgba(59, 130, 246, 0.3);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .image-frame:hover {
            transform: rotateY(0deg) rotateX(0deg);
        }

        .hero-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            border-radius: 23px;
            position: relative;
            z-index: 2;
        }

        /* Упрощенная рамка */
        .simple-border {
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 27px;
            z-index: 1;
            overflow: hidden;
            pointer-events: none;
            background: linear-gradient(45deg, 
                rgba(59, 130, 246, 0.2) 0%, 
                rgba(139, 92, 246, 0.2) 50%,
                rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(59, 130, 246, 0.4);
        }

        /* Частицы */
        .particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, 
                rgba(255, 255, 255, 0.8) 20%,
                var(--neon-blue) 50%,
                transparent 70%);
            border-radius: 50%;
            filter: blur(1px);
            animation: particleFloat var(--duration, 10s) linear infinite;
        }

        /* Кнопка приветствия в герое */
        .hero-voice-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
            font-weight: 600;
            position: relative;
            overflow: hidden;
            margin-top: 20px;
        }

        .hero-voice-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.6);
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
        }

        .hero-voice-btn i {
            font-size: 1.3em;
        }

        .playing-indicator {
            display: none;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            color: var(--primary);
            font-size: 0.9em;
            animation: fadeIn 0.3s ease;
        }

        .playing-indicator.active {
            display: flex;
        }

        .sound-waves {
            display: flex;
            align-items: center;
            gap: 3px;
            height: 20px;
        }

        .wave {
            width: 3px;
            background: var(--primary);
            border-radius: 2px;
            animation: wave 1.2s ease-in-out infinite;
        }

        .wave:nth-child(2) { animation-delay: 0.1s; }
        .wave:nth-child(3) { animation-delay: 0.2s; }
        .wave:nth-child(4) { animation-delay: 0.3s; }
        .wave:nth-child(5) { animation-delay: 0.4s; }

        /* Анимации */
        @keyframes gradientText {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotateY(-5deg) rotateX(2deg); }
            50% { transform: translateY(-20px) rotateY(-8deg) rotateX(4deg); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(var(--start-x, 0));
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(calc(var(--start-x, 0) + var(--drift, 100px)));
                opacity: 0;
            }
        }

        @keyframes pulse {
            0%, 100% { 
                transform: scale(1); 
                opacity: 1; 
            }
            50% { 
                transform: scale(1.1); 
                opacity: 0.8; 
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes wave {
            0%, 100% { height: 8px; }
            50% { height: 20px; }
        }

        /* ===== БЛОКИ ФИЧЕЙ ===== */
        .feature-section {
            padding: 100px 20px;
            position: relative;
        }

        .feature-section:nth-child(even) {
            background: linear-gradient(135deg, 
                rgba(15, 23, 42, 0.98) 0%, 
                rgba(30, 41, 59, 0.95) 100%);
        }

        .feature-section:nth-child(odd) {
            background: linear-gradient(135deg, 
                rgba(30, 41, 59, 0.95) 0%, 
                rgba(15, 23, 42, 0.98) 100%);
        }

        .feature-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .feature-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.4);
            padding: 12px 24px;
            border-radius: 50px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .feature-badge i {
            color: var(--ai-color);
            font-size: 20px;
        }

        .feature-title {
            font-size: 2.8em;
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 25px;
            background: linear-gradient(135deg, var(--primary), var(--ai-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .feature-description {
            font-size: 1.3em;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto 40px;
            line-height: 1.6;
        }

        .feature-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 50px;
            margin-top: 40px;
            border: 1px solid var(--border);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .feature-content {
            font-size: 1.1em;
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 40px;
        }

        .feature-content p {
            margin-bottom: 25px;
        }

        .feature-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .feature-point {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 25px;
            border-left: 4px solid var(--ai-color);
        }

        .feature-point h4 {
            color: var(--text-primary);
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-point h4 i {
            color: var(--ai-color);
        }

        .feature-point p {
            color: var(--text-secondary);
            font-size: 1em;
            line-height: 1.6;
        }

        .feature-action {
            text-align: center;
            margin-top: 50px;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .feature-btn {
            background: linear-gradient(135deg, var(--ai-color), var(--primary));
            color: white;
            border: none;
            padding: 18px 45px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
            font-weight: 600;
            text-decoration: none;
        }

        .feature-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(139, 92, 246, 0.4);
            background: linear-gradient(135deg, var(--primary), var(--ai-color));
        }

        /* ===== ОСНОВНОЕ ПРИЛОЖЕНИЕ ===== */
        .main-app {
            padding: 40px 20px;
            background: var(--bg-primary);
        }

        .app-title {
            text-align: center;
            margin-bottom: 40px;
            padding: 0 20px;
        }

        .app-title h2 {
            font-size: 2.8em;
            background: linear-gradient(135deg, var(--primary), var(--ai-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            font-weight: 800;
        }

        /* ===== КОНТЕЙНЕР AURORA ===== */
        .aurora-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 25px;
        }

        /* Шапка */
        .header {
            grid-column: 1 / -1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--ai-color));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

        .logo-text h1 {
            font-size: 28px;
            background: linear-gradient(135deg, var(--primary), var(--ai-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
        }

        .version-badge {
            background: linear-gradient(135deg, var(--ai-color), var(--primary));
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            margin-left: 10px;
        }

        /* Основной контент */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* Карточки */
        .search-section, .create-note, .notes-section {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 8px 25px var(--shadow);
            transition: transform 0.3s ease;
        }

        .search-section:hover, .create-note:hover, .notes-section:hover {
            transform: translateY(-5px);
        }

        /* Поиск */
        .search-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-header i {
            color: var(--ai-color);
            font-size: 24px;
        }

        .search-header h2 {
            font-size: 20px;
            font-weight: 700;
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 16px 50px 16px 20px;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--ai-color);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }

        .search-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, var(--ai-color), var(--primary));
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: linear-gradient(135deg, var(--primary), var(--ai-color));
            transform: translateY(-50%) scale(1.1);
        }

        /* Информация о гибридном поиске */
        .search-info {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(59, 130, 246, 0.1));
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .search-info h4 {
            color: var(--ai-color);
            margin-bottom: 10px;
            font-size: 14px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .search-info p {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
            margin-bottom: 5px;
        }

        /* Заметки */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-header h2 {
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-header h2 i {
            color: var(--primary);
        }

        .notes-count {
            background: linear-gradient(135deg, var(--ai-color), var(--primary));
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
        }

        .notes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .note-card {
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 14px;
            padding: 20px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .note-card:hover {
            border-color: var(--ai-color);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .note-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .note-text {
            color: var(--text-secondary);
            font-size: 15px;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .note-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .note-tag {
            background: var(--bg-primary);
            color: var(--text-secondary);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            border: 1px solid var(--border);
        }

        .note-tag.ai {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2));
            border-color: var(--ai-color);
            color: var(--ai-color);
        }

        /* Боковая панель */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .analytics-card, .quick-actions-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid var(--border);
            transition: transform 0.3s ease;
        }

        .analytics-card:hover, .quick-actions-card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .card-header i {
            color: var(--ai-color);
            font-size: 20px;
        }

        .card-header h3 {
            font-size: 18px;
            font-weight: 700;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .stat-item.ai {
            border-color: var(--ai-color);
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), var(--bg-secondary));
        }

        .stat-value {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-value.ai {
            color: var(--ai-color);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .actions-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .action-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .action-item:hover {
            background: var(--bg-tertiary);
            border-color: var(--ai-color);
            transform: translateX(5px);
        }

        .action-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--ai-color), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }

        .action-text span {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
            display: block;
        }

        .action-text small {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Результаты поиска */
        .search-results-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(16, 185, 129, 0.1));
            border-radius: 12px;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .search-results-header i {
            color: var(--ai-color);
            font-size: 20px;
        }

        .search-results-header span {
            color: var(--text-primary);
            font-weight: 600;
        }

        .search-results-header .query {
            color: var(--ai-color);
            font-weight: 700;
        }

        /* Футер */
        .footer {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            border-top: 1px solid var(--border);
            margin-top: 50px;
        }

        .footer-logo {
            font-size: 2.5em;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--ai-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .footer-copyright {
            color: var(--text-secondary);
            font-size: 0.9em;
            opacity: 0.7;
            margin-top: 20px;
        }

        /* Адаптивность */
        @media (max-width: 1200px) {
            .hero-title {
                font-size: 3em;
            }
            
            .image-frame {
                height: 450px;
            }
            
            .feature-title {
                font-size: 2.5em;
            }
        }

        @media (max-width: 992px) {
            .hero-container {
                grid-template-columns: 1fr;
                gap: 40px;
                text-align: center;
            }
            
            .hero-title {
                font-size: 2.8em;
            }
            
            .hero-subtitle {
                margin: 0 auto 40px;
            }
            
            .image-frame {
                max-width: 600px;
                margin: 0 auto;
                height: 400px;
            }
            
            .hero-actions {
                justify-content: center;
            }
            
            .aurora-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .sidebar {
                grid-template-columns: 1fr 1fr;
                display: grid;
                gap: 25px;
            }
        }

        @media (max-width: 768px) {
            .hero-section {
                padding: 20px 15px;
                min-height: 90vh;
            }
            
            .hero-title {
                font-size: 2.2em;
            }
            
            .image-frame {
                height: 350px;
            }
            
            .hero-content {
                padding: 20px;
            }
            
            .notes-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .logo {
                justify-content: center;
            }

            .feature-section {
                padding: 60px 20px;
            }
            
            .feature-title {
                font-size: 2em;
            }
            
            .feature-card {
                padding: 30px;
            }
        }

        @media (max-width: 480px) {
            .hero-section {
                min-height: 80vh;
            }
            
            .hero-title {
                font-size: 1.8em;
            }
            
            .image-frame {
                height: 280px;
            }
            
            .hero-badge {
                padding: 10px 20px;
            }
            
            .hero-voice-btn {
                padding: 12px 25px;
                font-size: 1em;
                width: 100%;
                justify-content: center;
            }
            
            .app-title h2 {
                font-size: 1.8em;
            }
            
            .search-section,
            .create-note,
            .notes-section,
            .analytics-card,
            .quick-actions-card {
                padding: 20px;
            }
            
            .feature-title {
                font-size: 1.6em;
            }
            
            .feature-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- ОПТИМИЗИРОВАННАЯ ГЕРОЙ-СЕКЦИЯ С АНИМАЦИЕЙ -->
    <section class="hero-section" id="heroSection">
        <!-- Частицы -->
        <div class="particles-container" id="particlesContainer"></div>
        
        <div class="hero-container">
            <!-- Левая часть - контент -->
            <div class="hero-content">
                <div class="hero-badge">
                    <i class="fas fa-bolt"></i>
                    <span>НОВОЕ ПОКОЛЕНИЕ AI</span>
                </div>
                
                <h1 class="hero-title">
                    Aurora - Цифровой Дневник
                    <span style="display: block; font-size: 0.6em; margin-top: 10px;">
                        Познай себя через свои мысли
                    </span>
                </h1>
                
                <p class="hero-subtitle">
                    Персональный AI, который анализирует ваши мысли, находит паттерны успеха 
                    и помогает принимать решения на основе вашего опыта.
                </p>
                
                <!-- Кнопка приветствия в герое -->
                <button class="hero-voice-btn" id="heroVoiceBtn">
                    <i class="fas fa-volume-up"></i>
                    Приветствие Aurora
                </button>
                
                <div class="playing-indicator" id="playingIndicator">
                    <div class="sound-waves">
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                    </div>
                    <span>Воспроизводится...</span>
                </div>
            </div>
            
            <!-- Правая часть - изображение с анимацией -->
            <div class="hero-image-container">
                <div class="simple-border"></div>
                <div class="image-frame">
                    <img src="angel.png" alt="Aurora Цифровой Дневник" class="hero-image" id="heroImage"
                         onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1611224923853-80b023f02d71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';">
                </div>
            </div>
        </div>
    </section>

    <!-- БЛОК 1: Зеркальное мышление -->
    <section class="feature-section">
        <div class="feature-container">
            <div class="feature-header">
                <div class="feature-badge">
                    <i class="fas fa-brain"></i>
                    <span>AURORA - ЗЕРКАЛЬНОЕ МЫШЛЕНИЕ</span>
                </div>
                <h2 class="feature-title">Узнайте свои паттерны мышления</h2>
                <p class="feature-description">
                    Ваш цифровой двойник анализирует, как вы думаете, и помогает увидеть себя со стороны.
                    Найдите повторяющиеся ошибки, успешные стратегии и скрытые инсайты.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-content">
                    <p><strong>«Зеркало мышления»</strong> — это не просто анализ заметок. Это глубокое изучение того, КАК вы думаете. Система выявляет:</p>
                    
                    <div class="feature-points">
                        <div class="feature-point">
                            <h4><i class="fas fa-chart-line"></i> Паттерны успеха</h4>
                            <p>Когда вы принимаете лучшие решения? Какие условия, время дня, эмоциональное состояние ведут к успешным результатам?</p>
                        </div>
                        
                        <div class="feature-point">
                            <h4><i class="fas fa-exclamation-circle"></i> Типичные ошибки</h4>
                            <p>Какие мыслительные паттерны ведут к стрессу, прокрастинации или неправильным решениям? Как их избежать?</p>
                        </div>
                        
                        <div class="feature-point">
                            <h4><i class="fas fa-lightbulb"></i> Скрытые инсайты</h4>
                            <p>«Вы принимаете лучшие решения по вторникам утром после кофе» — такие инсайты помогают оптимизировать свою жизнь.</p>
                        </div>
                    </div>
                    
                    <p>Система анализирует сотни ваших заметок и выстраивает полную картину вашего мышления. Вы увидите графы связей, тепловые карты активности, временные паттерны и многое другое.</p>
                    
                    <p>Все анализы происходят <strong>локально на вашем устройстве</strong>. Ваши мысли никогда не покидают его. ИИ помогает анализировать, но не видит содержания ваших заметок.</p>
                </div>
                
                <div class="feature-action">
                    <a href="mirror.html" class="feature-btn">
                        <i class="fas fa-play-circle"></i>
                        Запустить зеркало мышления
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- БЛОК 2: Аналитик & Советник -->
    <section class="feature-section">
        <div class="feature-container">
            <div class="feature-header">
                <div class="feature-badge">
                    <i class="fas fa-microchip"></i>
                    <span>AURORA - АНАЛИТИК & СОВЕТНИК</span>
                </div>
                <h2 class="feature-title">Приватная AI-архитектура</h2>
                <p class="feature-description">
                    Уникальная трёхуровневая система, где ваши данные остаются локально, а ИИ помогает, не видя содержимого ваших заметок.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-content">
                    <p><strong>Архитектура «Аналитик-Советник»</strong> — это прорыв в приватности данных. В отличие от обычных AI-сервисов, которые читают всё:</p>
                    
                    <div class="feature-points">
                        <div class="feature-point">
                            <h4><i class="fas fa-mobile-alt"></i> Локальный Аналитик</h4>
                            <p>На вашем устройстве. Читает заметки, выделяет паттерны. <strong>Данные не покидают устройство.</strong> Видит ваш текст: "Стресс на работе... гулять вечером..."</p>
                        </div>
                        
                        <div class="feature-point">
                            <h4><i class="fas fa-key"></i> Шифрование AES-256</h4>
                            <p>Паттерны шифруются перед отправкой. Передаются только обезличенные данные. 
                                <span style="display: inline-block; font-family: monospace; font-size: 11px; background: rgba(16, 185, 129, 0.1); padding: 4px 8px; border-radius: 4px; margin-top: 5px;">
                                    U2FsdGVkX1+7F8kD5A2L9qPwM4nT6RvYcXzJ7KmN3HpQ=
                                </span>
                            </p>
                        </div>
                        
                        <div class="feature-point">
                            <h4><i class="fas fa-cloud"></i> ИИ-Советник</h4>
                            <p>На защищённом сервере. Анализирует паттерны, даёт рекомендации. <strong>Не видит исходный текст.</strong> Видит только: "pattern_work_stress: 87%"</p>
                        </div>
                    </div>
                    
                    <p>Эта архитектура соответствует GDPR, HIPAA и профессиональной этике врачей, юристов, психологов. Вы получаете умные рекомендации, не жертвуя конфиденциальностью.</p>
                    
                    <p><strong>Пример работы:</strong> Вы пишете "Начальник бесит, куча заданий". Локальный аналитик видит это, но отправляет ИИ только паттерн "work_conflict_high_stress". ИИ рекомендует "Делайте перерывы, планируйте задачи", не зная о вашем начальнике.</p>
                </div>
                
                <div class="feature-action">
                    <a href="analyst.html" class="feature-btn">
                        <i class="fas fa-play-circle"></i>
                        Попробовать демо архитектуры
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- БЛОК 3: Гибридный поиск -->
    <section class="feature-section">
        <div class="feature-container">
            <div class="feature-header">
                <div class="feature-badge">
                    <i class="fas fa-search-plus"></i>
                    <span>AURORA - ГИБРИДНЫЙ ПОИСК</span>
                </div>
                <h2 class="feature-title">Поиск, который понимает смысл</h2>
                <p class="feature-description">
                    В отличие от обычного поиска по ключевым словам, наш гибридный поиск понимает морфологию, семантику и контекст.
                </p>
            </div>
            
            <!-- ВСТАВЛЯЕМ СЮДА ВЕСЬ БЛОК ГИБРИДНОГО ПОИСКА ИЗ ПРЕДЫДУЩЕЙ ВЕРСИИ -->
            <div class="main-app">
                <div class="app-title">
                    <h2>Гибридный поиск Aurora</h2>
                </div>
                
                <div class="aurora-container">
                    <header class="header">
                        <div class="logo">
                            <div class="logo-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="logo-text">
                                <h1>Aurora <span class="version-badge">4.0 AI</span></h1>
                            </div>
                        </div>
                        <div class="header-actions">
                            <button class="btn" id="export-btn">
                                <i class="fas fa-download"></i> Экспорт
                            </button>
                        </div>
                    </header>

                    <main class="main-content">
                        <section class="search-section">
                            <div class="search-header">
                                <i class="fas fa-search-plus"></i>
                                <h2>Гибридный поиск Aurora</h2>
                            </div>
                            <div class="search-box">
                                <input type="text" class="search-input" id="search-input" 
                                       placeholder="Например: 'пойду гулять' или 'планы движения'">
                                <button class="search-btn pulse" id="search-btn">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                            
                            <div class="search-info">
                                <h4><i class="fas fa-robot"></i> Понимает:</h4>
                                <p>• Разные формы слов: <strong>"пойти" = "пойду" = "пошел" = "пойдешь"</strong></p>
                                <p>• Семантику: <strong>"гулять" = "прогулка" = "пройтись" = "прогуляться"</strong></p>
                                <p>• Контекст: находит по смыслу, а не только словам</p>
                                <p>• Теги: учитывает все связанные теги и категории</p>
                            </div>
                            
                            <div id="search-results-header" class="search-results-header" style="display: none;">
                                <i class="fas fa-check-circle"></i>
                                <span>Найдено <strong id="found-count">0</strong> заметок по запросу: "<span id="current-query" class="query"></span>"</span>
                            </div>
                        </section>

                        <section class="create-note">
                            <div class="section-header">
                                <h2><i class="fas fa-plus-circle"></i> Новая заметка</h2>
                            </div>
                            <form class="note-form" id="note-form">
                                <div class="form-group">
                                    <input type="text" id="note-title" class="search-input" placeholder="Заголовок (например: Идея для проекта)">
                                </div>
                                <div class="form-group">
                                    <textarea id="note-text" class="search-input" rows="3" placeholder="Текст заметки... (попробуйте вставить: 'Завтра пойду гулять в парк')"></textarea>
                                </div>
                                <button type="submit" class="hero-voice-btn" style="width: 100%; margin-top: 15px;">
                                    <i class="fas fa-save"></i> Сохранить заметку
                                </button>
                            </form>
                        </section>

                        <section class="notes-section">
                            <div class="section-header">
                                <h2><i class="fas fa-sticky-note"></i> Заметки</h2>
                                <div class="notes-count" id="notes-count">2 заметки</div>
                            </div>
                            <div class="notes-grid" id="notes-container">
                                <!-- Заметки будут загружены сюда JavaScript -->
                            </div>
                        </section>
                    </main>

                    <aside class="sidebar">
                        <div class="analytics-card">
                            <div class="card-header">
                                <i class="fas fa-chart-network"></i>
                                <h3>Аналитика поиска</h3>
                            </div>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-value" id="total-notes">2</div>
                                    <div class="stat-label">Всего заметок</div>
                                </div>
                                <div class="stat-item ai">
                                    <div class="stat-value ai" id="smart-searches">0</div>
                                    <div class="stat-label">Умных поисков</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="movement-notes">1</div>
                                    <div class="stat-label">Перемещений</div>
                                </div>
                                <div class="stat-item ai">
                                    <div class="stat-value ai" id="context-matches">0</div>
                                    <div class="stat-label">Контекстных совпадений</div>
                                </div>
                            </div>
                            
                            <div class="search-analytics" style="margin-top: 20px; padding-top: 15px; border-top: 1px solid var(--border);">
                                <h4><i class="fas fa-microchip"></i> AI-понимание</h4>
                                <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.4;">
                                    <p>Система использует гибридный подход:</p>
                                    <p>• <strong>Морфологический анализ</strong> - понимает формы слов</p>
                                    <p>• <strong>Семантические связи</strong> - находит по смыслу</p>
                                    <p>• <strong>Контекстный поиск</strong> - учитывает окружение слов</p>
                                </div>
                            </div>
                        </div>

                        <div class="quick-actions-card">
                            <div class="card-header">
                                <i class="fas fa-bolt"></i>
                                <h3>Тесты поиска</h3>
                            </div>
                            <div class="actions-list">
                                <div class="action-item" id="action-test-hybrid">
                                    <div class="action-icon">
                                        <i class="fas fa-search"></i>
                                    </div>
                                    <div class="action-text">
                                        <span>Тест гибридного поиска</span>
                                        <small>"пойду гулять" (найдет 2 заметки)</small>
                                    </div>
                                </div>
                                <div class="action-item" id="action-test-morphology">
                                    <div class="action-icon">
                                        <i class="fas fa-language"></i>
                                    </div>
                                    <div class="action-text">
                                        <span>Тест морфологии</span>
                                        <small>"прогулка" или "пошел"</small>
                                    </div>
                                </div>
                                <div class="action-item" id="action-test-context">
                                    <div class="action-icon">
                                        <i class="fas fa-project-diagram"></i>
                                    </div>
                                    <div class="action-text">
                                        <span>Тест контекста</span>
                                        <small>"планы движения"</small>
                                    </div>
                                </div>
                                <div class="action-item" id="action-add-ai-sample">
                                    <div class="action-icon">
                                        <i class="fas fa-robot"></i>
                                    </div>
                                    <div class="action-text">
                                        <span>Добавить AI-заметку</span>
                                        <small>С разными формами слов</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </section>

    <!-- Футер -->
    <footer class="footer">
        <div class="footer-logo">AURORA AI</div>
        <p class="footer-copyright">
            © 2024 Система мышления Aurora 4.0 с гибридным поиском | Понимает смысл, а не только слова
        </p>
    </footer>

    <!-- Аудио элемент -->
    <audio id="welcomeAudio" preload="auto">
        <source src="welcome.mp3" type="audio/mpeg">
        Ваш браузер не поддерживает аудио элемент.
    </audio>

    <script>
        // ===== ГЕРОЙ-СЕКЦИЯ: ЧАСТИЦЫ И ИЗОБРАЖЕНИЕ =====
        function createParticles() {
            const container = document.getElementById('particlesContainer');
            if (!container) return;
            
            const particleCount = window.innerWidth < 768 ? 15 : 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * 3 + 2;
                const startX = Math.random() * 100;
                const duration = Math.random() * 15 + 10;
                const drift = Math.random() * 200 - 100;
                
                particle.style.cssText = `
                    width: ${size}px;
                    height: ${size}px;
                    --start-x: ${startX}vw;
                    --duration: ${duration}s;
                    --drift: ${drift}px;
                    left: ${startX}vw;
                    animation-delay: ${Math.random() * 5}s;
                    background: radial-gradient(circle, 
                        rgba(255, 255, 255, ${Math.random() * 0.3 + 0.1}) 20%,
                        ${i % 3 === 0 ? 'var(--neon-blue)' : i % 3 === 1 ? 'var(--neon-purple)' : 'var(--neon-pink)'} ${Math.random() * 30 + 40}%,
                        transparent 70%);
                `;
                
                container.appendChild(particle);
            }
        }

        // Оптимизация загрузки изображения
        function optimizeHeroImage() {
            const heroImage = document.getElementById('heroImage');
            const imageFrame = document.querySelector('.image-frame');
            
            // Проверяем, загрузилось ли изображение
            if (heroImage.complete) {
                if (heroImage.naturalHeight === 0) {
                    // Изображение не загрузилось, показываем fallback
                    console.log('Изображение не загрузилось, показываем fallback');
                    heroImage.src = 'https://images.unsplash.com/photo-1611224923853-80b023f02d71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
                } else {
                    console.log('✅ Изображение успешно загружено:', heroImage.src);
                }
            }
            
            // Добавляем обработчик ошибки
            heroImage.onerror = function() {
                console.log('❌ Ошибка загрузки изображения, показываем fallback');
                this.src = 'https://images.unsplash.com/photo-1611224923853-80b023f02d71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
            };
        }

        // ===== АУДИО СИСТЕМА =====
        const audio = document.getElementById('welcomeAudio');
        const heroVoiceBtn = document.getElementById('heroVoiceBtn');
        const playingIndicator = document.getElementById('playingIndicator');
        let isPlaying = false;

        audio.addEventListener('canplaythrough', () => {
            console.log('✅ Аудио файл готов к воспроизведению');
        });

        audio.addEventListener('error', (e) => {
            console.error('❌ Ошибка загрузки аудио:', e);
            heroVoiceBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Аудио недоступно';
            heroVoiceBtn.style.background = 'linear-gradient(135deg, #ef4444, #f87171)';
            heroVoiceBtn.disabled = true;
        });

        heroVoiceBtn.addEventListener('click', () => {
            if (isPlaying) {
                audio.pause();
                audio.currentTime = 0;
                isPlaying = false;
                playingIndicator.classList.remove('active');
                heroVoiceBtn.innerHTML = '<i class="fas fa-volume-up"></i> Приветствие Aurora';
            } else {
                audio.currentTime = 0;
                audio.play().then(() => {
                    isPlaying = true;
                    playingIndicator.classList.add('active');
                    heroVoiceBtn.innerHTML = '<i class="fas fa-pause"></i> Остановить';
                }).catch(error => {
                    console.error('Ошибка воспроизведения:', error);
                    heroVoiceBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Нажмите для разрешения';
                    setTimeout(() => {
                        heroVoiceBtn.innerHTML = '<i class="fas fa-volume-up"></i> Приветствие Aurora';
                    }, 2000);
                });
            }
        });

        audio.addEventListener('ended', () => {
            isPlaying = false;
            playingIndicator.classList.remove('active');
            heroVoiceBtn.innerHTML = '<i class="fas fa-volume-up"></i> Приветствие Aurora';
        });

        // ===== ИНИЦИАЛИЗАЦИЯ ПРИ ЗАГРУЗКЕ =====
        document.addEventListener('DOMContentLoaded', function() {
            // Создаем частицы
            createParticles();
            
            // Оптимизируем изображение
            setTimeout(optimizeHeroImage, 100);
            
            // Пересоздаем частицы при изменении размера окна
            window.addEventListener('resize', function() {
                const container = document.getElementById('particlesContainer');
                if (container) {
                    container.innerHTML = '';
                    setTimeout(createParticles, 100);
                }
            });
            
            // Инициализируем гибридный поиск
            initHybridSearch();
            
            console.log('🚀 Aurora 4.0 в новой структуре загружен');
        });

        // ===== ГИБРИДНЫЙ ПОИСК =====
        function initHybridSearch() {
            // (Весь код гибридного поиска из предыдущей версии сохраняется)
            // Классы HybridSearch и AuroraApp остаются без изменений
            
            class HybridSearch {
                constructor() {
                    this.morphology = {
                        "пойти": ["пойду", "пошел", "пошла", "пошли", "пойдешь", "пойти", "ходить", "сходить"],
                        "гулять": ["прогулка", "прогуляться", "пройтись", "погулять", "гуляю", "гулял", "гуляла"],
                        "работать": ["работа", "рабочий", "труд", "занятие", "работаю", "работал"],
                        "готовить": ["приготовить", "готовка", "приготовление", "готовлю", "готовил"],
                        "город": ["городе", "города", "городской", "мегаполис"],
                        "парк": ["парке", "парки", "парковой", "сквер"],
                        "магазин": ["магазине", "магазины", "торговый", "супермаркет"],
                        "работа": ["работе", "работы", "служба", "деятельность"],
                        "важный": ["важное", "важные", "важнейший", "значимый"],
                        "срочный": ["срочное", "срочные", "неотложный", "экстренный"],
                        "интересный": ["интересное", "интересные", "увлекательный", "занимательный"]
                    };
                    
                    this.semanticGroups = {
                        "движение": ["пойти", "гулять", "ходить", "сходить", "отправиться", "двигаться", "перемещаться"],
                        "работа": ["работать", "трудиться", "заниматься", "выполнять", "делать"],
                        "отдых": ["отдыхать", "расслабляться", "развлекаться", "отдых", "релакс"],
                        "покупки": ["покупать", "купить", "приобрести", "магазин", "шопинг"],
                        "встречи": ["встретиться", "встреча", "свидание", "видеться", "общаться"]
                    };
                    
                    this.searchHistory = [];
                }
                
                search(query, notes) {
                    const originalQuery = query.toLowerCase().trim();
                    console.log(`🔍 Поиск: "${originalQuery}"`);
                    
                    this.searchHistory.push({
                        query: originalQuery,
                        timestamp: new Date().toISOString(),
                        results: 0
                    });
                    
                    const expandedQuery = this.expandQuery(originalQuery);
                    console.log(`🧠 Расширенный запрос:`, expandedQuery);
                    
                    const results = [];
                    const scoring = [];
                    
                    notes.forEach((note, index) => {
                        const noteText = (note.title + ' ' + note.text + ' ' + note.tags.join(' ')).toLowerCase();
                        let score = 0;
                        let matches = [];
                        
                        if (noteText.includes(originalQuery)) {
                            score += 100;
                            matches.push(`точное совпадение: "${originalQuery}"`);
                        }
                        
                        expandedQuery.morphology.forEach(word => {
                            if (noteText.includes(word)) {
                                score += 30;
                                matches.push(`форма: "${word}"`);
                            }
                        });
                        
                        expandedQuery.semantic.forEach(group => {
                            group.words.forEach(word => {
                                if (noteText.includes(word)) {
                                    score += 20;
                                    matches.push(`семантика: "${word}" (${group.name})`);
                                }
                            });
                        });
                        
                        expandedQuery.synonyms.forEach(synonym => {
                            if (noteText.includes(synonym)) {
                                score += 15;
                                matches.push(`синоним: "${synonym}"`);
                            }
                        });
                        
                        const words = originalQuery.split(' ');
                        words.forEach(word => {
                            if (word.length > 3 && noteText.includes(word)) {
                                score += 10;
                                matches.push(`частичное: "${word}"`);
                            }
                        });
                        
                        if (score > 0) {
                            results.push({
                                note: note,
                                score: score,
                                matches: matches,
                                highlightedText: this.highlightMatches(note.text, expandedQuery.allWords)
                            });
                            
                            scoring.push({ index, score });
                        }
                    });
                    
                    results.sort((a, b) => b.score - a.score);
                    
                    console.log(`📊 Найдено ${results.length} заметок с гибридным поиском`);
                    results.forEach((result, i) => {
                        console.log(`  ${i+1}. "${result.note.title}" (очков: ${result.score})`);
                        result.matches.forEach(match => console.log(`     • ${match}`));
                    });
                    
                    this.searchHistory[this.searchHistory.length - 1].results = results.length;
                    
                    return {
                        results: results.map(r => r.note),
                        analytics: {
                            query: originalQuery,
                            expandedQuery: expandedQuery,
                            totalFound: results.length,
                            topMatches: results.slice(0, 3).map(r => ({
                                title: r.note.title,
                                score: r.score,
                                matchCount: r.matches.length
                            })),
                            searchMethod: results.length > 0 ? 'гибридный' : 'базовый'
                        }
                    };
                }
                
                expandQuery(query) {
                    const words = query.split(' ').filter(w => w.length > 2);
                    const morphologyForms = [];
                    const semanticGroups = [];
                    const synonyms = [];
                    const allWords = new Set(words);
                    
                    words.forEach(word => {
                        for (const [base, forms] of Object.entries(this.morphology)) {
                            if (forms.includes(word) || word.includes(base)) {
                                morphologyForms.push(...forms);
                                allWords.add(base);
                                forms.forEach(f => allWords.add(f));
                            }
                        }
                        
                        for (const [groupName, groupWords] of Object.entries(this.semanticGroups)) {
                            if (groupWords.includes(word)) {
                                semanticGroups.push({
                                    name: groupName,
                                    words: groupWords
                                });
                                groupWords.forEach(w => allWords.add(w));
                            }
                        }
                        
                        if (word === "пойду" || word === "пошел") {
                            synonyms.push("пойти", "ходить", "сходить");
                            ["пойти", "ходить", "сходить"].forEach(w => allWords.add(w));
                        }
                        if (word === "гулять") {
                            synonyms.push("прогулка", "прогуляться", "пройтись");
                            ["прогулка", "прогуляться", "пройтись"].forEach(w => allWords.add(w));
                        }
                        if (word === "работа") {
                            synonyms.push("труд", "дело", "занятие");
                            ["труд", "дело", "занятие"].forEach(w => allWords.add(w));
                        }
                    });
                    
                    return {
                        original: query,
                        morphology: [...new Set(morphologyForms)],
                        semantic: semanticGroups,
                        synonyms: [...new Set(synonyms)],
                        allWords: [...allWords]
                    };
                }
                
                highlightMatches(text, searchWords) {
                    let highlighted = text;
                    searchWords.forEach(word => {
                        if (word.length > 2) {
                            const regex = new RegExp(`(${word})`, 'gi');
                            highlighted = highlighted.replace(regex, '<mark>$1</mark>');
                        }
                    });
                    return highlighted;
                }
                
                analyzeQuery(query) {
                    const expanded = this.expandQuery(query);
                    return {
                        wordCount: query.split(' ').length,
                        morphologyForms: expanded.morphology.length,
                        semanticGroups: expanded.semantic.length,
                        expandedWords: expanded.allWords.length,
                        complexity: expanded.morphology.length > 0 ? 'высокая' : 
                                   expanded.semantic.length > 0 ? 'средняя' : 'базовая'
                    };
                }
            }

            // ===== СИСТЕМА ЗАМЕТОК AURORA =====
            const demoNotes = [
                {
                    id: 1,
                    title: "Планы на понедельник",
                    text: "В понедельник пойду гулять с подругой в центре города. Надо выбрать кафе для встречи, может быть сходить в кино. После прогулки планирую зайти в книжный магазин.",
                    tags: ["гулять", "подруга", "город", "встреча", "кино", "прогулка", "магазин"],
                    date: "Сегодня, 10:30",
                    hasMovement: true,
                    category: "личное"
                },
                {
                    id: 2,
                    title: "Рабочие задачи на завтра",
                    text: "Завтра нужно пойти на работу раньше, чтобы подготовить отчет для начальства. Встреча с клиентом в 11:00, затем обед с коллегами. Вечером нужно остаться и доделать презентацию.",
                    tags: ["работа", "отчет", "встреча", "клиент", "задачи", "презентация", "начальство"],
                    date: "Вчера, 14:15",
                    hasMovement: true,
                    category: "работа"
                },
                {
                    id: 3,
                    title: "Идея для нового проекта",
                    text: "Можно создать приложение для отслеживания личных целей с AI-ассистентом. Нужно продумать архитектуру и интерфейс.",
                    tags: ["идея", "проект", "приложение", "AI", "цели"],
                    date: "2 дня назад",
                    hasMovement: false,
                    category: "идеи"
                }
            ];

            class AuroraApp {
                constructor() {
                    this.notes = this.loadNotes();
                    this.searchEngine = new HybridSearch();
                    this.smartSearches = 0;
                    this.contextMatches = 0;
                    this.init();
                }

                init() {
                    this.renderNotes();
                    this.setupEventListeners();
                    this.updateAnalytics();
                    console.log('🚀 Aurora 4.0 с гибридным поиском запущен');
                }

                loadNotes() {
                    const saved = localStorage.getItem('aurora-notes');
                    return saved ? JSON.parse(saved) : [...demoNotes];
                }

                saveNotes() {
                    localStorage.setItem('aurora-notes', JSON.stringify(this.notes));
                }

                renderNotes(filteredNotes = null) {
                    const container = document.getElementById('notes-container');
                    const notesToRender = filteredNotes || this.notes;
                    
                    container.innerHTML = '';

                    if (notesToRender.length === 0) {
                        container.innerHTML = `
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-secondary)">
                                <i class="fas fa-sticky-note" style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></i>
                                <h3 style="margin-bottom: 10px;">Заметок пока нет</h3>
                                <p>Создайте первую заметку или добавьте пример</p>
                            </div>
                        `;
                    } else {
                        notesToRender.forEach(note => {
                            const element = document.createElement('div');
                            element.className = 'note-card';
                            element.innerHTML = `
                                <div class="note-title">${note.title}</div>
                                <div class="note-text">${note.text}</div>
                                <div class="note-tags">
                                    ${note.tags.map(tag => `<span class="note-tag">${tag}</span>`).join('')}
                                    ${note.hasMovement ? '<span class="note-tag ai">перемещение</span>' : ''}
                                    ${note.category === 'работа' ? '<span class="note-tag" style="background: rgba(245,158,11,0.2); border-color: #f59e0b;">работа</span>' : ''}
                                </div>
                                <div style="margin-top: 10px; font-size: 12px; color: var(--text-secondary);">
                                    <i class="far fa-clock"></i> ${note.date}
                                </div>
                            `;
                            container.appendChild(element);
                        });
                    }

                    document.getElementById('notes-count').textContent = 
                        `${notesToRender.length} замет${this.getPluralForm(notesToRender.length)}`;
                }

                getPluralForm(number) {
                    if (number % 10 === 1 && number % 100 !== 11) return 'ка';
                    if (number % 10 >= 2 && number % 10 <= 4 && (number % 100 < 10 || number % 100 >= 20)) return 'ки';
                    return 'ок';
                }

                updateAnalytics() {
                    document.getElementById('total-notes').textContent = this.notes.length;
                    document.getElementById('smart-searches').textContent = this.smartSearches;
                    
                    const movementNotes = this.notes.filter(n => n.hasMovement).length;
                    document.getElementById('movement-notes').textContent = movementNotes;
                    
                    document.getElementById('context-matches').textContent = this.contextMatches;
                }

                performSmartSearch(query) {
                    const searchResult = this.searchEngine.search(query, this.notes);
                    this.smartSearches++;
                    
                    const analysis = this.searchEngine.analyzeQuery(query);
                    if (analysis.complexity !== 'базовая') {
                        this.contextMatches += searchResult.results.length;
                    }
                    
                    this.renderSearchResults(searchResult);
                    this.updateAnalytics();
                    
                    return searchResult;
                }

                renderSearchResults(searchResult) {
                    const container = document.getElementById('notes-container');
                    const header = document.getElementById('search-results-header');
                    const foundCount = document.getElementById('found-count');
                    const currentQuery = document.getElementById('current-query');
                    
                    container.innerHTML = '';
                    
                    if (searchResult.results.length === 0) {
                        container.innerHTML = `
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-secondary)">
                                <i class="fas fa-search" style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></i>
                                <h3 style="margin-bottom: 10px;">Гибридный поиск не нашел совпадений</h3>
                                <p>Запрос: "<strong>${searchResult.analytics.query}</strong>"</p>
                                <p style="font-size: 14px; margin-top: 10px;">Попробуйте другие формы слов или синонимы</p>
                                <button class="hero-voice-btn" style="margin-top: 15px; padding: 10px 20px;" onclick="auroraApp.renderNotes()">
                                    Показать все заметки
                                </button>
                            </div>
                        `;
                        header.style.display = 'none';
                    } else {
                        foundCount.textContent = searchResult.results.length;
                        currentQuery.textContent = searchResult.analytics.query;
                        header.style.display = 'flex';
                        
                        searchResult.results.forEach((note, index) => {
                            const element = document.createElement('div');
                            element.className = 'note-card';
                            
                            let displayText = note.text;
                            if (searchResult.analytics.expandedQuery) {
                                displayText = this.searchEngine.highlightMatches(note.text, searchResult.analytics.expandedQuery.allWords);
                            }
                            
                            element.innerHTML = `
                                <div class="note-title">${this.searchEngine.highlightMatches(note.title, searchResult.analytics.expandedQuery.allWords)}</div>
                                <div class="note-text">${displayText}</div>
                                <div class="note-tags">
                                    ${note.tags.map(tag => `<span class="note-tag">${tag}</span>`).join('')}
                                    ${note.hasMovement ? '<span class="note-tag ai">перемещение</span>' : ''}
                                </div>
                                <div style="margin-top: 10px; font-size: 12px; color: var(--text-secondary);">
                                    <i class="far fa-clock"></i> ${note.date}
                                    <span style="float: right; color: var(--ai-color);">
                                        <i class="fas fa-bolt"></i> AI-совпадение
                                    </span>
                                </div>
                            `;
                            container.appendChild(element);
                        });
                        
                        const analyticsDiv = document.createElement('div');
                        analyticsDiv.className = 'search-info';
                        analyticsDiv.style.marginTop = '20px';
                        analyticsDiv.innerHTML = `
                            <h4><i class="fas fa-chart-bar"></i> Анализ поиска:</h4>
                            <p>• Метод поиска: <strong>${searchResult.analytics.searchMethod}</strong></p>
                            <p>• Расширено до: <strong>${searchResult.analytics.expandedQuery.allWords.length}</strong> форм и синонимов</p>
                            <p>• Наиболее релевантные: ${searchResult.analytics.topMatches.map(m => `"${m.title}"`).join(', ')}</p>
                            <p>• Сложность запроса: <strong>${this.searchEngine.analyzeQuery(searchResult.analytics.query).complexity}</strong></p>
                        `;
                        container.appendChild(analyticsDiv);
                    }

                    document.getElementById('notes-count').textContent = 
                        `${searchResult.results.length} замет${this.getPluralForm(searchResult.results.length)} (гибридный поиск)`;
                }

                setupEventListeners() {
                    document.getElementById('note-form').addEventListener('submit', (e) => {
                        e.preventDefault();
                        
                        const title = document.getElementById('note-title').value.trim();
                        const text = document.getElementById('note-text').value.trim();
                        
                        if (!title || !text) {
                            alert('Пожалуйста, заполните заголовок и текст заметки');
                            return;
                        }
                        
                        const newNote = {
                            id: Date.now(),
                            title,
                            text,
                            tags: [],
                            date: 'Только что',
                            hasMovement: this.containsMovementWords(text),
                            category: this.detectCategory(text)
                        };
                        
                        this.notes.unshift(newNote);
                        this.saveNotes();
                        this.renderNotes();
                        this.updateAnalytics();
                        
                        document.getElementById('note-form').reset();
                        
                        document.querySelector('.notes-section').scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                    });

                    document.getElementById('search-btn').addEventListener('click', () => {
                        const query = document.getElementById('search-input').value.trim();
                        if (!query) {
                            this.renderNotes();
                            document.getElementById('search-results-header').style.display = 'none';
                            return;
                        }
                        
                        this.performSmartSearch(query);
                    });

                    document.getElementById('search-input').addEventListener('keyup', (e) => {
                        if (e.key === 'Enter') {
                            document.getElementById('search-btn').click();
                        }
                    });

                    document.getElementById('action-test-hybrid').addEventListener('click', () => {
                        document.getElementById('search-input').value = 'пойду гулять';
                        document.getElementById('search-btn').click();
                    });

                    document.getElementById('action-test-morphology').addEventListener('click', () => {
                        document.getElementById('search-input').value = 'прогулка';
                        document.getElementById('search-btn').click();
                    });

                    document.getElementById('action-test-context').addEventListener('click', () => {
                        document.getElementById('search-input').value = 'планы движения';
                        document.getElementById('search-btn').click();
                    });

                    document.getElementById('action-add-ai-sample').addEventListener('click', () => {
                        const samples = [
                            {
                                title: "Вечерняя прогулка по парку",
                                text: "Вечером решил прогуляться в парке, подышать свежим воздухом. Пошел по главной аллее, затем свернул к озеру. Хорошо пройтись после рабочего дня.",
                                tags: ["прогулка", "парк", "озеро", "вечер", "отдых"]
                            },
                            {
                                title: "Сходить за продуктами",
                                text: "Нужно сходить в магазин за продуктами: хлеб, молоко, фрукты. Может быть, зайти в торговый центр за новой рубашкой.",
                                tags: ["магазин", "продукты", "покупки", "торговый центр"]
                            },
                            {
                                title: "Рабочая встреча в городе",
                                text: "Завтра нужно отправиться на важную встречу с партнерами в центре города. Встречаемся в кафе на главной площади.",
                                tags: ["встреча", "город", "партнеры", "кафе", "работа"]
                            }
                        ];
                        
                        const sample = samples[Math.floor(Math.random() * samples.length)];
                        
                        const newNote = {
                            id: Date.now(),
                            ...sample,
                            date: 'Только что',
                            hasMovement: this.containsMovementWords(sample.text),
                            category: this.detectCategory(sample.text)
                        };
                        
                        this.notes.unshift(newNote);
                        this.saveNotes();
                        this.renderNotes();
                        this.updateAnalytics();
                        
                        alert(`Добавлена AI-заметка: "${sample.title}"`);
                    });

                    document.getElementById('export-btn').addEventListener('click', () => {
                        this.exportData();
                    });
                }

                containsMovementWords(text) {
                    const movementWords = ['пойду', 'пойти', 'ходить', 'сходить', 'отправиться', 'гулять', 'прогулка', 'пройтись'];
                    return movementWords.some(word => text.toLowerCase().includes(word));
                }

                detectCategory(text) {
                    const lowerText = text.toLowerCase();
                    if (lowerText.includes('работа') || lowerText.includes('отчет') || lowerText.includes('клиент')) return 'работа';
                    if (lowerText.includes('идея') || lowerText.includes('проект') || lowerText.includes('приложение')) return 'идеи';
                    if (lowerText.includes('гулять') || lowerText.includes('прогулка') || lowerText.includes('парк')) return 'личное';
                    return 'общее';
                }

                exportData() {
                    const data = JSON.stringify(this.notes, null, 2);
                    const blob = new Blob([data], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `aurora-notes-${new Date().toISOString().split('T')[0]}.json`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    alert(`Экспортировано ${this.notes.length} заметок с метаданными AI`);
                }
            }

            // Стиль для подсветки найденного текста
            const highlightStyle = document.createElement('style');
            highlightStyle.textContent = `
                mark {
                    background: linear-gradient(135deg, rgba(139, 92, 246, 0.4), rgba(59, 130, 246, 0.4));
                    color: var(--text-primary);
                    padding: 1px 3px;
                    border-radius: 3px;
                    font-weight: bold;
                }
                
                .btn {
                    background: var(--bg-secondary);
                    color: var(--text-primary);
                    border: 1px solid var(--border);
                    padding: 10px 20px;
                    border-radius: 10px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    font-size: 14px;
                    font-weight: 600;
                }
                
                .btn:hover {
                    background: var(--bg-tertiary);
                    border-color: var(--ai-color);
                }
                
                .form-group {
                    margin-bottom: 15px;
                }
            `;
            document.head.appendChild(highlightStyle);

            // Запуск приложения
            let auroraApp;
            auroraApp = new AuroraApp();
            window.auroraApp = auroraApp;
            
            // Авто-тест гибридного поиска при загрузке
            setTimeout(() => {
                console.log('🧪 Авто-тест гибридного поиска...');
                const testBtn = document.getElementById('action-test-hybrid');
                if (testBtn) testBtn.click();
            }, 1500);
        }

        console.log('✨ Aurora 4.0 полностью загружена и готова!');
    </script>
</body>
</html>
